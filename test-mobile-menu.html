<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Menu Test</title>
    <style>
        /* Critical CSS for mobile menu test */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6; 
            color: #333; 
            background-color: #f8f8f8; 
        }
        
        .main-header {
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background-color: #fff;
            height: 60px;
        }
        
        .main-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            text-decoration: none;
        }
        
        .main-nav {
            display: flex;
            align-items: center;
        }
        
        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 2rem;
        }
        
        .nav-list a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-list a:hover {
            color: #3498db;
        }
        
        /* Mobile Navigation */
        .mobile-nav-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #2c3e50;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
            position: relative;
        }
        
        .mobile-nav-toggle:focus {
            outline: 2px solid #3498db;
            outline-offset: 2px;
        }
        
        @media (max-width: 768px) {
            .mobile-nav-toggle {
                display: block;
            }
            
            .nav-list {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                height: calc(100vh - 70px);
                background: #fff;
                flex-direction: column;
                align-items: center;
                padding: 2rem 0;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                z-index: 1000;
                overflow-y: auto;
            }
            
            .nav-list[data-visible="true"] {
                transform: translateX(0);
            }
            
            .nav-list li {
                margin: 1rem 0;
                width: 100%;
                text-align: center;
            }
            
            .nav-list li a {
                display: block;
                padding: 1rem 2rem;
                font-size: 1.1rem;
                font-weight: 500;
                border-bottom: 1px solid #f0f0f0;
            }
            
            .nav-list li:last-child a {
                border-bottom: none;
            }
            
            body.menu-open {
                overflow: hidden;
            }
        }
        
        main {
            margin-top: 80px;
            padding: 2rem;
        }
        
        .test-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        
        .test-button:hover {
            background: #2980b9;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background: #f0f0f0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <a href="#" class="logo">shades</a>
            <nav class="main-nav">
                <button class="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false">
                    <span class="visually-hidden">Menu</span>
                    <i class="fas fa-bars">☰</i>
                </button>
                <ul id="primary-navigation" class="nav-list">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#products">Products</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="test-content">
            <h1>Mobile Menu Test</h1>
            <p>This page tests the mobile menu functionality. Resize your browser window to mobile size (less than 768px) to see the hamburger menu.</p>
            
            <div class="status" id="status">Ready to test mobile menu...</div>
            
            <h2>Test Instructions:</h2>
            <ol>
                <li>Resize your browser window to less than 768px width</li>
                <li>Click the hamburger menu button (☰)</li>
                <li>The menu should slide in from the left</li>
                <li>Click a menu item - the menu should close</li>
                <li>Click outside the menu - it should close</li>
                <li>Press the Escape key - it should close</li>
            </ol>
            
            <h2>Test Controls:</h2>
            <button class="test-button" onclick="testMenuToggle()">Test Menu Toggle</button>
            <button class="test-button" onclick="testMenuClose()">Test Menu Close</button>
            <button class="test-button" onclick="checkMenuState()">Check Menu State</button>
            
            <h2>Current Menu State:</h2>
            <div id="menuState">Loading...</div>
        </div>
    </main>

    <script>
        // Mobile menu functionality
        function initMobileMenu() {
            console.log('Initializing mobile menu...');
            const menuToggle = document.querySelector('.mobile-nav-toggle');
            const primaryNav = document.querySelector('.nav-list');
            
            if (!menuToggle || !primaryNav) {
                console.error('Required menu elements not found');
                updateStatus('Error: Required menu elements not found', 'error');
                return;
            }
            
            // Ensure initial state
            primaryNav.setAttribute('data-visible', 'false');
            menuToggle.setAttribute('aria-expanded', 'false');
            
            // Toggle menu
            menuToggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                const newState = !isExpanded;
                
                this.setAttribute('aria-expanded', String(newState));
                
                if (newState) {
                    primaryNav.setAttribute('data-visible', 'true');
                    document.body.classList.add('menu-open');
                    updateStatus('Menu opened successfully', 'success');
                } else {
                    primaryNav.setAttribute('data-visible', 'false');
                    document.body.classList.remove('menu-open');
                    updateStatus('Menu closed successfully', 'success');
                }
                
                updateMenuState();
            });
            
            // Close menu when clicking on a nav link
            const navLinks = primaryNav.querySelectorAll('a');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    menuToggle.setAttribute('aria-expanded', 'false');
                    primaryNav.setAttribute('data-visible', 'false');
                    document.body.classList.remove('menu-open');
                    updateStatus('Menu closed by nav link click', 'success');
                    updateMenuState();
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!menuToggle.contains(e.target) && !primaryNav.contains(e.target)) {
                    if (primaryNav.getAttribute('data-visible') === 'true') {
                        menuToggle.setAttribute('aria-expanded', 'false');
                        primaryNav.setAttribute('data-visible', 'false');
                        document.body.classList.remove('menu-open');
                        updateStatus('Menu closed by outside click', 'success');
                        updateMenuState();
                    }
                }
            });
            
            // Close menu on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && primaryNav.getAttribute('data-visible') === 'true') {
                    menuToggle.setAttribute('aria-expanded', 'false');
                    primaryNav.setAttribute('data-visible', 'false');
                    document.body.classList.remove('menu-open');
                    updateStatus('Menu closed by Escape key', 'success');
                    updateMenuState();
                }
            });
            
            updateStatus('Mobile menu initialized successfully', 'success');
            updateMenuState();
        }
        
        function updateStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            console.log(message);
        }
        
        function updateMenuState() {
            const menuToggle = document.querySelector('.mobile-nav-toggle');
            const primaryNav = document.querySelector('.nav-list');
            const menuState = document.getElementById('menuState');
            
            if (menuToggle && primaryNav) {
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                const isVisible = primaryNav.getAttribute('data-visible') === 'true';
                const bodyClass = document.body.classList.contains('menu-open');
                
                menuState.innerHTML = `
                    <strong>Menu Toggle:</strong> ${isExpanded ? 'Expanded' : 'Collapsed'}<br>
                    <strong>Menu Visible:</strong> ${isVisible ? 'Yes' : 'No'}<br>
                    <strong>Body Class:</strong> ${bodyClass ? 'menu-open' : 'none'}<br>
                    <strong>Window Width:</strong> ${window.innerWidth}px
                `;
            }
        }
        
        function testMenuToggle() {
            const menuToggle = document.querySelector('.mobile-nav-toggle');
            if (menuToggle) {
                menuToggle.click();
            }
        }
        
        function testMenuClose() {
            const menuToggle = document.querySelector('.mobile-nav-toggle');
            const primaryNav = document.querySelector('.nav-list');
            
            if (menuToggle && primaryNav) {
                menuToggle.setAttribute('aria-expanded', 'false');
                primaryNav.setAttribute('data-visible', 'false');
                document.body.classList.remove('menu-open');
                updateStatus('Menu manually closed', 'success');
                updateMenuState();
            }
        }
        
        function checkMenuState() {
            updateMenuState();
            updateStatus('Menu state checked', 'success');
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initMobileMenu();
            
            // Update menu state on window resize
            window.addEventListener('resize', updateMenuState);
        });
    </script>
</body>
</html>